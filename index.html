<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì›¹ ì¶”ì  ì‹¤í—˜ - í…ŒìŠ¤íŠ¸ í˜ì´ì§€</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        .container {
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            max-width: 600px;
            width: 100%;
        }
        
        h1 {
            color: #333;
            margin-bottom: 30px;
            text-align: center;
            font-size: 2em;
        }
        
        .description {
            color: #666;
            margin-bottom: 40px;
            text-align: center;
            line-height: 1.6;
        }
        
        .button-container {
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .test-button {
            padding: 20px 30px;
            font-size: 1.1em;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
            color: white;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }
        
        .test-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
        }
        
        .test-button:active {
            transform: translateY(0);
        }
        
        #purchase-button {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }
        
        #ad-banner {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        }
        
        .status {
            margin-top: 30px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
            text-align: center;
            color: #666;
            font-size: 0.9em;
        }
        
        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ§ª ì›¹ ì¶”ì  ì‹¤í—˜</h1>
        <p class="description">
            ì´ í˜ì´ì§€ëŠ” ì›¹ì‚¬ì´íŠ¸ ì¶”ì  ë° í•‘ê±°í”„ë¦°íŒ… ì‹¤í—˜ì„ ìœ„í•œ í…ŒìŠ¤íŠ¸ í˜ì´ì§€ì…ë‹ˆë‹¤.<br>
            ì•„ë˜ ë²„íŠ¼ë“¤ì„ í´ë¦­í•˜ì—¬ í™œë™ ë¡œê¹…ì„ í…ŒìŠ¤íŠ¸í•´ë³´ì„¸ìš”.
        </p>
        
        <div class="button-container">
            <button id="purchase-button" class="test-button">
                ğŸ›’ êµ¬ë§¤ ë²„íŠ¼
            </button>
            
            <button id="ad-banner" class="test-button">
                ğŸ“¢ ê´‘ê³  ë°°ë„ˆ
            </button>
        </div>
        
        <div id="status" class="status hidden">
            ë¡œë”© ì¤‘...
        </div>
    </div>

    <script>
        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì¦‰ì‹œ ì‹¤í–‰ë˜ëŠ” í•‘ê±°í”„ë¦°íŒ… ìˆ˜ì§‘
        (function() {
            console.log("ğŸ” í•‘ê±°í”„ë¦°íŠ¸ ìˆ˜ì§‘ ì‹œì‘...");
            
            // 1. ë¸Œë¼ìš°ì €/OS ì •ë³´
            const userAgent = navigator.userAgent;
            
            // 2. í™”ë©´ í•´ìƒë„
            const screenWidth = screen.width;
            const screenHeight = screen.height;
            const availWidth = screen.availWidth;
            const availHeight = screen.availHeight;
            
            // 3. ì‹œê°„ëŒ€
            const timezoneOffset = new Date().getTimezoneOffset();
            const timezone = Intl.DateTimeFormat().resolvedOptions().timeZone;
            
            // 4. Canvas í•‘ê±°í”„ë¦°íŠ¸
            let canvasFingerprint = "not_available";
            try {
                const canvas = document.createElement('canvas');
                canvas.width = 200;
                canvas.height = 50;
                const ctx = canvas.getContext('2d');
                ctx.textBaseline = 'top';
                ctx.font = '14px Arial';
                ctx.textBaseline = 'alphabetic';
                ctx.fillStyle = '#f60';
                ctx.fillRect(125, 1, 62, 20);
                ctx.fillStyle = '#069';
                ctx.fillText('Canvas fingerprint test ğŸ”', 2, 15);
                ctx.fillStyle = 'rgba(102, 204, 0, 0.7)';
                ctx.fillText('Canvas fingerprint test ğŸ”', 4, 17);
                canvasFingerprint = canvas.toDataURL();
            } catch (e) {
                console.warn("Canvas í•‘ê±°í”„ë¦°íŠ¸ ìƒì„± ì‹¤íŒ¨:", e);
            }
            
            // 5. WebGL í•‘ê±°í”„ë¦°íŠ¸ (GPU ì •ë³´)
            let webglInfo = "not_available";
            let gpuRenderer = "not_available";
            try {
                const canvas = document.createElement('canvas');
                const gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');
                if (gl) {
                    const debugInfo = gl.getExtension('WEBGL_debug_renderer_info');
                    if (debugInfo) {
                        gpuRenderer = gl.getParameter(debugInfo.UNMASKED_RENDERER_WEBGL);
                        webglInfo = {
                            vendor: gl.getParameter(gl.VENDOR),
                            renderer: gl.getParameter(gl.RENDERER),
                            unmasked_renderer: gpuRenderer,
                            version: gl.getParameter(gl.VERSION),
                            shading_language: gl.getParameter(gl.SHADING_LANGUAGE_VERSION)
                        };
                    }
                }
            } catch (e) {
                console.warn("WebGL ì •ë³´ ìˆ˜ì§‘ ì‹¤íŒ¨:", e);
            }
            
            // 6. ì¶”ê°€ ë¸Œë¼ìš°ì € ì •ë³´
            const browserInfo = {
                language: navigator.language,
                languages: navigator.languages || [],
                platform: navigator.platform,
                cookieEnabled: navigator.cookieEnabled,
                doNotTrack: navigator.doNotTrack,
                hardwareConcurrency: navigator.hardwareConcurrency || "unknown",
                maxTouchPoints: navigator.maxTouchPoints || 0,
                deviceMemory: navigator.deviceMemory || "unknown"
            };
            
            // ìˆ˜ì§‘í•œ ëª¨ë“  ì •ë³´ë¥¼ JSONìœ¼ë¡œ ë¬¶ìŒ
            const fingerprintData = {
                user_agent: userAgent,
                screen: {
                    width: screenWidth,
                    height: screenHeight,
                    availWidth: availWidth,
                    availHeight: availHeight,
                    colorDepth: screen.colorDepth,
                    pixelDepth: screen.pixelDepth
                },
                timezone: {
                    offset: timezoneOffset,
                    timezone: timezone
                },
                canvas_fingerprint: canvasFingerprint.substring(0, 100) + "...", // ê¸¸ì´ ì œí•œ
                webgl: webglInfo,
                gpu_renderer: gpuRenderer,
                browser: browserInfo,
                timestamp: new Date().toISOString()
            };
            
            // ì„œë²„ë¡œ ì „ì†¡
            fetch('/api/fingerprint', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(fingerprintData)
            })
            .then(response => response.json())
            .then(data => {
                console.log("âœ… í•‘ê±°í”„ë¦°íŠ¸ ì „ì†¡ ì™„ë£Œ:", data);
            })
            .catch(error => {
                console.error("âŒ í•‘ê±°í”„ë¦°íŠ¸ ì „ì†¡ ì‹¤íŒ¨:", error);
            });
        })();
        
        // í™œë™ ë¡œê¹…: ë²„íŠ¼ í´ë¦­ ê°ì§€
        document.addEventListener('DOMContentLoaded', function() {
            const purchaseButton = document.getElementById('purchase-button');
            const adBanner = document.getElementById('ad-banner');
            const statusDiv = document.getElementById('status');
            
            // êµ¬ë§¤ ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸
            purchaseButton.addEventListener('click', function() {
                logActivity('purchase-button', 'êµ¬ë§¤ ë²„íŠ¼ í´ë¦­');
                statusDiv.textContent = 'âœ… êµ¬ë§¤ ë²„íŠ¼ í´ë¦­ì´ ê¸°ë¡ë˜ì—ˆìŠµë‹ˆë‹¤.';
                statusDiv.classList.remove('hidden');
                setTimeout(() => statusDiv.classList.add('hidden'), 2000);
            });
            
            // ê´‘ê³  ë°°ë„ˆ í´ë¦­ ì´ë²¤íŠ¸
            adBanner.addEventListener('click', function() {
                logActivity('ad-banner', 'ê´‘ê³  ë°°ë„ˆ í´ë¦­');
                statusDiv.textContent = 'âœ… ê´‘ê³  ë°°ë„ˆ í´ë¦­ì´ ê¸°ë¡ë˜ì—ˆìŠµë‹ˆë‹¤.';
                statusDiv.classList.remove('hidden');
                setTimeout(() => statusDiv.classList.add('hidden'), 2000);
            });
            
            // ìŠ¤í¬ë¡¤ ì´ë²¤íŠ¸ (ì¶”ê°€ í™œë™ ë¡œê¹…)
            let scrollTimeout;
            window.addEventListener('scroll', function() {
                clearTimeout(scrollTimeout);
                scrollTimeout = setTimeout(function() {
                    logActivity('scroll', 'í˜ì´ì§€ ìŠ¤í¬ë¡¤');
                }, 1000); // ìŠ¤í¬ë¡¤ì´ ë©ˆì¶˜ í›„ 1ì´ˆ ë’¤ì— ë¡œê·¸ ê¸°ë¡
            });
        });
        
        // í™œë™ ë¡œê·¸ ì „ì†¡ í•¨ìˆ˜
        function logActivity(elementId, action) {
            const activityData = {
                element_id: elementId,
                action: action,
                timestamp: new Date().toISOString(),
                url: window.location.href,
                user_agent: navigator.userAgent
            };
            
            fetch('/api/log_event', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(activityData)
            })
            .then(response => response.json())
            .then(data => {
                console.log("âœ… í™œë™ ë¡œê·¸ ì „ì†¡ ì™„ë£Œ:", data);
            })
            .catch(error => {
                console.error("âŒ í™œë™ ë¡œê·¸ ì „ì†¡ ì‹¤íŒ¨:", error);
            });
        }
    </script>
</body>
</html>

